name: DBT Project CICD

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: set up python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      - name: install DBT
        run: |
          python -m pip install --upgrade pip
          pip install dbt-snowflake

      - name: print folder structure
        run: |
          cd airbnb_dbt
          echo "$USER"
          echo "$ACCOUNT"
          echo "$PASSWORD"
          dbt debug
        env:
          USER: ${{ secrets.USER }}
          ACCOUNT: ${{ secrets.ACCOUNT }}
          PASSWORD: ${{ secrets.PASSWORD }}
